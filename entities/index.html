<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Entity Interfaces | @jmondi/oauth2-server</title>
    <meta name="generator" content="VuePress 1.8.2">
    
    <meta name="description" content="A standards compliant implementation of an OAuth 2.0 authorization server for Node that utilizes JWT and Proof Key for Code Exchange (PKCE), written in TypeScript. ">
    
    <link rel="preload" href="/ts-oauth2-server/assets/css/0.styles.ace02c17.css" as="style"><link rel="preload" href="/ts-oauth2-server/assets/js/app.e4010ef4.js" as="script"><link rel="preload" href="/ts-oauth2-server/assets/js/2.eeb228d0.js" as="script"><link rel="preload" href="/ts-oauth2-server/assets/js/9.fc013a56.js" as="script"><link rel="prefetch" href="/ts-oauth2-server/assets/js/10.ad3b4567.js"><link rel="prefetch" href="/ts-oauth2-server/assets/js/11.0dccd8a1.js"><link rel="prefetch" href="/ts-oauth2-server/assets/js/12.f170c7a2.js"><link rel="prefetch" href="/ts-oauth2-server/assets/js/13.5dea15c7.js"><link rel="prefetch" href="/ts-oauth2-server/assets/js/14.2027debb.js"><link rel="prefetch" href="/ts-oauth2-server/assets/js/15.af20fa08.js"><link rel="prefetch" href="/ts-oauth2-server/assets/js/16.c3510250.js"><link rel="prefetch" href="/ts-oauth2-server/assets/js/17.8342024f.js"><link rel="prefetch" href="/ts-oauth2-server/assets/js/18.b1184797.js"><link rel="prefetch" href="/ts-oauth2-server/assets/js/19.3ae9f5b8.js"><link rel="prefetch" href="/ts-oauth2-server/assets/js/20.a094a67d.js"><link rel="prefetch" href="/ts-oauth2-server/assets/js/3.f1044b1b.js"><link rel="prefetch" href="/ts-oauth2-server/assets/js/4.2025cade.js"><link rel="prefetch" href="/ts-oauth2-server/assets/js/5.9e3e377e.js"><link rel="prefetch" href="/ts-oauth2-server/assets/js/6.59a9b290.js"><link rel="prefetch" href="/ts-oauth2-server/assets/js/7.2d4f4db5.js"><link rel="prefetch" href="/ts-oauth2-server/assets/js/8.98e2ff65.js">
    <link rel="stylesheet" href="/ts-oauth2-server/assets/css/0.styles.ace02c17.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/ts-oauth2-server/" class="home-link router-link-active"><!----> <span class="site-name">@jmondi/oauth2-server</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="https://github.com/jasonraimondi/ts-oauth2-server" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="/ts-oauth2-server/getting_started/" class="nav-link">
  Getting Started
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="https://github.com/jasonraimondi/ts-oauth2-server" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="/ts-oauth2-server/getting_started/" class="nav-link">
  Getting Started
</a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/ts-oauth2-server/" aria-current="page" class="sidebar-link">TypeScript OAuth2.0 Server</a></li><li><a href="/ts-oauth2-server/getting_started/" class="sidebar-link">Getting Started</a></li><li><section class="sidebar-group depth-0"><a href="/ts-oauth2-server/grants/" class="sidebar-heading clickable"><span>Grants</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/ts-oauth2-server/grants/client_credentials.html" class="sidebar-link">Client Credentials Grant</a></li><li><a href="/ts-oauth2-server/grants/authorization_code.html" class="sidebar-link">Authorization Code Grant (w/ PKCE)</a></li><li><a href="/ts-oauth2-server/grants/refresh_token.html" class="sidebar-link">Refresh Token Grant</a></li><li><a href="/ts-oauth2-server/grants/password.html" class="sidebar-link">Password Grant</a></li><li><a href="/ts-oauth2-server/grants/implicit.html" class="sidebar-link">Implicit Grant</a></li></ul></section></li><li><a href="/ts-oauth2-server/repositories/" class="sidebar-link">Repository Interfaces</a></li><li><a href="/ts-oauth2-server/entities/" aria-current="page" class="active sidebar-link">Entity Interfaces</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/ts-oauth2-server/entities/#client-entity" class="sidebar-link">Client Entity</a></li><li class="sidebar-sub-header"><a href="/ts-oauth2-server/entities/#auth-code-entity" class="sidebar-link">Auth Code Entity</a></li><li class="sidebar-sub-header"><a href="/ts-oauth2-server/entities/#token-entity" class="sidebar-link">Token Entity</a></li><li class="sidebar-sub-header"><a href="/ts-oauth2-server/entities/#user-entity" class="sidebar-link">User Entity</a></li><li class="sidebar-sub-header"><a href="/ts-oauth2-server/entities/#scope-entity" class="sidebar-link">Scope Entity</a></li></ul></li><li><a href="/ts-oauth2-server/adapters/" class="sidebar-link">Adapters</a></li><li><a href="/ts-oauth2-server/glossary/" class="sidebar-link">Glossary</a></li><li><a href="/ts-oauth2-server/sources/" class="sidebar-link">Sources</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="entity-interfaces"><a href="#entity-interfaces" class="header-anchor">#</a> Entity Interfaces</h1> <h2 id="client-entity"><a href="#client-entity" class="header-anchor">#</a> Client Entity</h2> <p>This entity represents the client that wants to access the resource server. The client will retrieve an access token from our authorization server and use it to access the resource server.</p> <p>// document what a good redirectUrl is</p> <ul><li>URI must be an absolute URI</li> <li>The endpoint may include application/x-www-form-urlencoded formatted query component which must be retained when adding additional query params
<ul><li>// @todo verify this second point, i know we can append urls, but we need to enccode/decode the redirectUri</li></ul></li> <li>the endpoint uri must not include a fragment component</li></ul> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">interface</span> <span class="token class-name">OAuthClient</span> <span class="token punctuation">{</span>
  id<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  secret<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  redirectUris<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  allowedGrants<span class="token operator">:</span> GrantIdentifier<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  scopes<span class="token operator">:</span> OAuthScope<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="auth-code-entity"><a href="#auth-code-entity" class="header-anchor">#</a> Auth Code Entity</h2> <p>The auth code is used to retrieve an access token from the authorization server.</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">interface</span> <span class="token class-name">OAuthAuthCode</span> <span class="token punctuation">{</span>
  code<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  redirectUri<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  codeChallenge<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  codeChallengeMethod<span class="token operator">?</span><span class="token operator">:</span> CodeChallengeMethod<span class="token punctuation">;</span>
  expiresAt<span class="token operator">:</span> Date<span class="token punctuation">;</span>
  user<span class="token operator">?</span><span class="token operator">:</span> OAuthUser<span class="token punctuation">;</span>
  client<span class="token operator">:</span> OAuthClient<span class="token punctuation">;</span>
  scopes<span class="token operator">:</span> OAuthScope<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="custom-block tip"><p class="custom-block-title">TIP</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">type</span> <span class="token class-name">CodeChallengeMethod</span> <span class="token operator">=</span> <span class="token string">&quot;S256&quot;</span> <span class="token operator">|</span> <span class="token string">&quot;plain&quot;</span><span class="token punctuation">;</span>
</code></pre></div></div> <h2 id="token-entity"><a href="#token-entity" class="header-anchor">#</a> Token Entity</h2> <p>The access and refresh token that can be used to authenticate into the resource server.</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">interface</span> <span class="token class-name">OAuthToken</span> <span class="token punctuation">{</span>
  accessToken<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  accessTokenExpiresAt<span class="token operator">:</span> Date<span class="token punctuation">;</span>
  refreshToken<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  refreshTokenExpiresAt<span class="token operator">?</span><span class="token operator">:</span> Date<span class="token punctuation">;</span>
  client<span class="token operator">:</span> OAuthClient<span class="token punctuation">;</span>
  user<span class="token operator">?</span><span class="token operator">:</span> OAuthUser<span class="token punctuation">;</span>
  scopes<span class="token operator">:</span> OAuthScope<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="user-entity"><a href="#user-entity" class="header-anchor">#</a> User Entity</h2> <p>The resource owner</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">interface</span> <span class="token class-name">OAuthUser</span> <span class="token punctuation">{</span>
  id<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  <span class="token punctuation">[</span>key<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">]</span><span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="scope-entity"><a href="#scope-entity" class="header-anchor">#</a> Scope Entity</h2> <p>Scopes are a way to limit an app’s access to a user’s data.</p> <p>https://www.oauth.com/oauth2-servers/scope/</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">interface</span> <span class="token class-name">OAuthScope</span> <span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  <span class="token punctuation">[</span>key<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">]</span><span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/ts-oauth2-server/repositories/" class="prev">
        Repository Interfaces
      </a></span> <span class="next"><a href="/ts-oauth2-server/adapters/">
        Adapters
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/ts-oauth2-server/assets/js/app.e4010ef4.js" defer></script><script src="/ts-oauth2-server/assets/js/2.eeb228d0.js" defer></script><script src="/ts-oauth2-server/assets/js/9.fc013a56.js" defer></script>
  </body>
</html>
